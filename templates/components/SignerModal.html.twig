<div data-utility--signer-modal-target="dialog" class="iu-dialog" style="display:none;">
  <div class="iu-backdrop" data-action="click->utility--signer-modal#closeDialog"></div>
  <div class="iu-modal">
    <div class="modal-header">
      <h5>Remote Signer Login</h5>
      <button type="button" class="close" data-action="click->utility--signer-modal#closeDialog">&times;</button>
    </div>
    <div class="modal-body">
      {# Bunker reconnect — for users who already have an active session #}
      <div class="mb-4 p-3" style="background: var(--bg-muted, #f8f9fa); border-radius: 6px;">
        <label for="signer-modal-bunker-input" class="small fw-bold d-block mb-1">Have an existing bunker session?</label>
        <p class="small text-muted mb-2">Paste your <code>bunker://</code> connection string to reconnect.</p>
        <div class="input-group input-group-sm">
          <input type="text"
                 id="signer-modal-bunker-input"
                 class="form-control font-monospace small"
                 data-utility--signer-modal-target="bunkerInput"
                 style="font-size: 0.75rem;"
                 placeholder="bunker://...">
          <button class="btn btn-outline-secondary"
                  type="button"
                  data-action="click->utility--signer-modal#connectBunker">
            Connect
          </button>
        </div>
      </div>

      <hr class="my-3">
      <p class="text-muted mb-3">Or start a new pairing — scan the QR with a NIP-46 compatible bunker signer.</p>
      <div class="row">
        <div class="col-md-6 text-center mb-3">
          <div data-utility--signer-modal-target="qr" class="mb-2"></div>
          <div class="mt-3">
            <label for="signer-modal-uri-input" class="small text-muted mb-2 d-block">Or copy the connection string:</label>
            <div class="input-group input-group-sm d-flex flex-row">
              <input type="text"
                     id="signer-modal-uri-input"
                     class="form-control font-monospace small"
                     data-utility--signer-modal-target="uriInput"
                     readonly
                     style="font-size: 0.75rem;"
                     placeholder="Loading...">
              <button class="btn btn-outline-secondary"
                      type="button"
                      data-action="click->utility--signer-modal#copyUri"
                      data-utility--signer-modal-target="copyButton">
                Copy
              </button>
            </div>
            <p class="small text-muted mt-1 mb-0">Paste this into your signer app if it's on the same device</p>
          </div>
        </div>
        <div class="col-md-6">
          <h6>Status</h6>
          <div data-utility--signer-modal-target="status" class="small text-muted">Initializing…</div>
          <hr>
          <p class="small text-muted mb-1">After pairing, any page that uses window.nostr will automatically use this remote signer session.</p>
          <p class="small text-muted">If pairing stalls, close and reopen this dialog to generate a new ephemeral key.</p>
        </div>
      </div>
    </div>
  </div>
</div>

