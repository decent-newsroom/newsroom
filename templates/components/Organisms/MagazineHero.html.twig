<div {{ attributes }}>
    <section class="d-flex gap-3 center ln-section--newsstand mb-3">
        <div class="container mt-5">
            <h1><a href="{{ path('magazine-index', {mag: mag}) }}">{{ magazine.title|default(magazine.slug|default(mag)) }}</a></h1>
            {% if magazine.summary is defined and magazine.summary %}
                <p class="eyebrow">{{ magazine.summary }}</p>
            {% endif %}
            <div>by <twig:Molecules:UserFromNpub :ident="magazine.pubkey" /></div>
        </div>
        <div class="container mb-5">
            {# Use computed property via this.categoryTags #}
            {% if this.categoryTags is not empty %}
                <ul class="list-unstyled d-flex flex-row flex-wrap gap-3 justify-content-center mt-3">
                    {% for catTag in this.categoryTags %}
                        <li class="list-inline-item"><twig:Molecules:CategoryLink :coordinate="catTag" :mag="mag" /></li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-muted mt-4">No categories yet.</p>
            {% endif %}
        </div>
    </section>
    {# Add actions toolbar: share, zap, etc. #}
    <div data-controller="utility--share-dropdown" class="dropdown share-dropdown" style="display:inline-block;position:relative;">
        <button data-utility--share-dropdown-target="button"
                class="btn btn-secondary"
                id="shareBtn"
                type="button"
                aria-haspopup="true"
                aria-expanded="false"
                data-action="click->utility--share-dropdown#toggle">
            Share
        </button>
        <div data-utility--share-dropdown-target="menu"
             class="dropdown-menu"
             id="shareDropdown"
             style="display:none;position:absolute;z-index:1000;min-width:200px;">
            <button class="dropdown-item"
                    type="button"
                    data-action="click->utility--share-dropdown#copy"
                    data-copy="{{ magazine|naddrEncode }}">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="vertical-align:middle;">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12H9m12 0A9 9 0 11 3 12a9 9 0 0118 0z" />
                </svg>
                Naddr
            </button>
        </div>
    </div>
</div>
