<turbo-frame id="profile-tab-content">
    <div class="profile-overview-content">
        {# Recent Articles Section #}
        {% if recentArticles|default([])|length > 0 %}
            <div class="overview-section">
                <div class="w-container">
                    <twig:Organisms:CardList :list="recentArticles" class="article-list overview-grid"></twig:Organisms:CardList>
                </div>
            </div>
        {% endif %}

        {# Recent Media Section #}
        {% if recentMedia|default([])|length > 0 %}
            <div class="overview-section">
                <div class="w-container">
                    {% include 'partial/_masonry.html.twig' with {mediaEvents: recentMedia} %}
                </div>
            </div>
        {% endif %}

        {# Recent Highlights Section #}
        {% if recentHighlights|default([])|length > 0 %}
            <div class="overview-section">
                <div class="highlights-preview">
                    {% for highlight in recentHighlights %}
                        <blockquote class="highlight-item compact">
                            <p>{{ highlight.content|length > 200 ? highlight.content|slice(0, 200) ~ '...' : highlight.content }}</p>
                            {% if highlight.sourceUrl %}
                                <a href="{{ highlight.sourceUrl }}" class="source-link" target="_blank" rel="noopener">
                                    Source â†’
                                </a>
                            {% endif %}
                        </blockquote>
                    {% endfor %}
                </div>
            </div>
        {% endif %}

        {# Empty state #}
        {% if recentArticles|default([])|length == 0 and recentMedia|default([])|length == 0 and recentHighlights|default([])|length == 0 %}
            <div class="no-content">
                {% if isOwner|default(false) %}
                    <p>You haven't published any content yet.</p>
                    <p>
                        <a href="{{ path('editor-create') }}" class="btn btn-primary" data-turbo-frame="_top">Write your first article</a>
                    </p>
                {% else %}
                    <p>This author hasn't published any content yet.</p>
                {% endif %}
            </div>
        {% endif %}
    </div>
</turbo-frame>
