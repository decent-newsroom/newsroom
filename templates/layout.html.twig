{% extends 'base.html.twig' %}

{% block layout %}
    <div class="layout" data-controller="ui--sidebar-toggle">
        <div>
            <nav id="leftNav">
                <header>
                    <button class="close" data-action="click->ui--sidebar-toggle#close" aria-label="Close left sidebar">✕</button>
                </header>
                <ul class="user-nav">
                    <li>
                        <a href="{{ path('newsstand') }}">Newsstand</a>
                    </li>
                    <li>
                        <a href="{{ path('discover') }}">Explore</a>
                    </li>
                    <li>
                        <a href="{{ path('forum') }}">Topics</a>
                    </li>
                    <li>
                        <a href="{{ path('media-discovery') }}">Multimedia</a>
                    </li>
                    <li>
                        <a href="{{ path('highlights') }}">Highlights</a>
                    </li>
                    <li>
                        <a href="{{ path('editor-create') }}">Write</a>
                    </li>
                    <li>
                        <a href="{{ path('reading_list_index') }}">Compose List</a>
                    </li>
                    <li>
                        <a href="{{ path('mag_wizard_setup') }}">Create Magazine</a>
                    </li>
                    <li>
                        <a href="{{ path('home') }}">Overview</a>
                    </li>
                </ul>
                <twig:UserMenu />

                <div class="container mt-2 mb-2 text-end hidden">
                    <a href="{{ path('feedback_form') }}" class="btn btn-outline-primary">Send Feedback</a>
                </div>
                {% block nav %}{% endblock %}
            </nav>
        </div>
        <main>
            {% block body %}{% endblock %}

            {# Floating reading list quick add widget #}
            {% if app.user %}
                <twig:ReadingListQuickAddComponent />
            {% endif %}
        </main>
        <div>
            <aside id="rightNav">
                <header>
                    <button class="close" data-action="click->sidebar-toggle#close" aria-label="Close right sidebar">✕</button>
                </header>
                {% block aside %}
                    {# Contribution invitation section #}
                    {% if contribution_npub and contribution_lud16 %}
                        <div class="contribution-section mt-3 mb-3 p-3 border rounded bg-light">
                            <div class="text-center mb-2">
                                <strong>Support this Project</strong>
                            </div>
                            <p class="small text-muted mb-2 text-center">
                                Help us build the future of decentralized journalism
                            </p>
                            <div class="text-center">
                                <twig:Molecules:ZapButton
                                    btnClass="btn-sm w-100"
                                    recipientPubkey="{{ contribution_npub|toHex }}"
                                    recipientLud16="{{ contribution_lud16 }}"
                                />
                            </div>
                        </div>
                    {% endif %}
                {% endblock %}
            </aside>
        </div>
    </div>
{% endblock %}
