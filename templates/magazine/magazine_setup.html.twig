{% extends 'layout.html.twig' %}

{% block body %}
    <twig:Atoms:PageHeading heading="Magazine Setup" tagline="Define the basics of your magazine"/>

  {{ form_start(form, {'attr': {'data-turbo': 'false'}}) }}
  {{ form_row(form.title) }}
  {{ form_row(form.summary) }}
  {{ form_row(form.imageUrl) }}
  {{ form_row(form.language) }}
  {{ form_row(form.tags) }}

  <h3>Categories</h3>
  <div class="alert alert-info mb-3">
    <strong>Tip:</strong><span>You can either create new categories OR attach existing reading lists.
    To attach an existing list, fill in the "Use existing list" field with its coordinate (format: 30040:pubkey:slug).
          You can find coordinates of your reading lists at <a href="{{ path('reading_list_index') }}" target="_blank">your reading lists</a>.</span>
  </div>
  <div
    {{ stimulus_controller('ui--form-collection') }}
    data-ui--form-collection-index-value="{{ form.categories|length > 0 ? form.categories|last.vars.name + 1 : 0 }}"
    data-ui--form-collection-prototype-value="{{ form_widget(form.categories.vars.prototype)|e('html_attr') }}">
    <ul class="list-unstyled" {{ stimulus_target('ui--form-collection', 'collectionContainer') }}>
      {% for cat in form.categories %}
        <li class="mb-3">{{ form_row(cat) }}</li>
      {% endfor %}
    </ul>
      <div class="actions mt-3">
          <button type="button" class="btn btn-secondary" {{ stimulus_action('ui--form-collection', 'addCollectionElement') }}>Add category</button>
      </div>
  </div>

  <div class="mt-3 d-flex flex-row gap-2 actions">
    <a class="btn btn-secondary" href="{{ path('mag_wizard_cancel') }}">Cancel</a>
    <button class="btn btn-primary">Next: Attach articles</button>
  </div>
  {{ form_end(form) }}
{% endblock %}
